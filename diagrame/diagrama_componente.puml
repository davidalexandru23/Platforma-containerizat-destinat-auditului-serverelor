@startuml diagrama_componente
!theme plain
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam componentStyle rectangle
skinparam linetype ortho
skinparam nodesep 60
skinparam ranksep 40

title Diagrama de Componente - Arhitectura Modulelor

rectangle "Frontend (React + Vite)" as FE #LightBlue {
    [Aplicatie SPA] as App
    [Router] as Router
    [AuthContext] as Ctx
    [Pagini] as Pages
    [Componente] as Comps
    [Client API] as ApiC
    [Hooks] as Hooks
}

rectangle "Backend (Express + Node.js)" as BE #LightGreen {
    [Server HTTP] as HTTP
    [Socket.IO] as WsSrv
    [Middleware] as MW
    [Rute API] as Routes
    [Servicii] as Svc
    [Prisma ORM] as ORM
}

rectangle "Agent (Go)" as AG #LightYellow {
    [CLI] as CLI
    [Enrollment] as Enroll
    [Runner] as Runner
    [MetricsCollector] as MetCol
    [InventoryCollector] as InvCol
    [AuditRunner] as AuditRun
}

database "PostgreSQL" as DB #LightGray

' Layout orizontal
FE -[hidden]right-> BE
BE -[hidden]right-> AG

' Conexiuni Frontend
App --> Router
App --> Ctx
Router --> Pages
Pages --> Comps
Comps --> ApiC
Comps --> Hooks

' Conexiuni Backend
HTTP --> MW
MW --> Routes
Routes --> Svc
Svc --> ORM
WsSrv --> Svc

' Conexiuni externe
ApiC --> HTTP : REST
Comps ..> WsSrv : WebSocket

ORM --> DB : TCP

' Conexiuni Agent
CLI --> Enroll
CLI --> Runner
Runner --> MetCol
Runner --> InvCol
Runner --> AuditRun
Enroll --> HTTP : REST
Runner --> HTTP : REST

@enduml
